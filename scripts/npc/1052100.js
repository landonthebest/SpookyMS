// AdventureMS Don Giovanni

var status;

function start() {status = -1; action(1,0,0);}
function action(mode, type, selection) { if (mode == 1) {status++;} else {status--;} if (status == -1) {cm.dispose();}

    else if (status == 0)
    {
        // Check if they've already done this once
        if (cm.getQuestStatus(1011) == 0)
        {
            // Check if they have the recommendation
            if (cm.haveItem(4007014))
            {
                cm.sendYesNo("Hello! I'm Don Giovanni, head of the beauty salon!\r\n\r\nI see you have a #rrecommendation from Shumi#k! That means I can give you a #eone-time, full-body makeover#n! Free of charge of course.\r\n\r\nWell, what do you think? Ready for a new up-do?\r\n\r\n#eFINE PRINT: #rThis will randomize your face, eye color, hair, hair color and skin color!#n Results may vary...#k");
            }

            // They are in the barbershop, have not gotten a makeover, but lost their recommendation?
            else
            {
                cm.sendOk("Hmmm, I don't think I've given you a makeover yet, but you don't seem to have #rShumi's recommendation#k either... Did you lose it?");
                cm.dispose();
            }
        }

        // They already turned in the recommendation
        else
        {
            cm.sendOk("Well, hope you read the 'fine print'! No take backs...\r\n\r\nThe #rBeauty Queen#k will be #eVERY#n pleased with this one! Hah!");
            cm.dispose();
        }
    }

    // They turned in the beauty coupon
    else if (status == 1)
    {
        // Make sure both checks are in balance
        if (cm.getQuestStatus(1011) == 0 && cm.haveItem(4007014))
        {
            // Create variables for new hair, face and skin
            var randomSkin;
            var randomHair;
            var randomFace;

            // Create Skin Array
            var skin = [0, 1, 2, 3, 4, 5, 9, 10];

            // Function to get a random index from the arrays
            function getRandomValue(arr)
            {
                return arr[Math.floor(Math.random() * arr.length)];
            }

            // Check for Male Gender
            if (cm.getPlayer().getGender() == 0)
            {
                // Create hair/face Arrays
                var mhair = [30000, 30001, 30002, 30003, 30004, 30005, 30006, 30007, 30010, 30020, 30021, 30022, 30023, 30024, 30025, 30026, 30027, 30030, 30031, 30032, 30033, 30034, 30035, 30036, 30037, 30040, 30041, 30042, 30043, 30044, 30045, 30046, 30047, 30050, 30051, 30052, 30053, 30054, 30055, 30056, 30057, 30060, 30061, 30062, 30063, 30064, 30065, 30066, 30067, 30070, 30080, 30090, 30100, 30101, 30102, 30103, 30104, 30105, 30106, 30107, 30110, 30111, 30112, 30113, 30114, 30115, 30116, 30117, 30120, 30121, 30122, 30123, 30124, 30125, 30126, 30127, 30130, 30131, 30132, 30133, 30134, 30135, 30136, 30137, 30140, 30141, 30142, 30143, 30144, 30145, 30146, 30147, 30150, 30151, 30152, 30153, 30154, 30155, 30156, 30157, 30160, 30161, 30162, 30163, 30164, 30165, 30166, 30167, 30170, 30171, 30172, 30173, 30174, 30175, 30176, 30177, 30180, 30181, 30182, 30183, 30184, 30185, 30186, 30187, 30190, 30191, 30192, 30193, 30194, 30195, 30196, 30197, 30200, 30201, 30202, 30203, 30204, 30205, 30206, 30207, 30210, 30211, 30212, 30213, 30214, 30215, 30216, 30217, 30220, 30221, 30222, 30223, 30224, 30225, 30226, 30227, 30230, 30231, 30232, 30233, 30234, 30235, 30236, 30237, 30240, 30241, 30242, 30243, 30244, 30245, 30246, 30247, 30250, 30251, 30252, 30253, 30254, 30255, 30256, 30257, 30260, 30261, 30262, 30263, 30264, 30265, 30266, 30267, 30270, 30271, 30272, 30273, 30274, 30275, 30276, 30277, 30280, 30281, 30282, 30283, 30284, 30285, 30286, 30287, 30290, 30291, 30292, 30293, 30294, 30295, 30296, 30297, 30300, 30301, 30302, 30303, 30304, 30305, 30306, 30307, 30310, 30311, 30312, 30313, 30314, 30315, 30316, 30317, 30320, 30321, 30322, 30323, 30324, 30325, 30326, 30327, 30330, 30331, 30332, 30333, 30334, 30335, 30336, 30337, 30340, 30341, 30342, 30343, 30344, 30345, 30346, 30347, 30350, 30351, 30352, 30353, 30354, 30355, 30356, 30357, 30360, 30361, 30362, 30363, 30364, 30365, 30366, 30367, 30370, 30371, 30372, 30373, 30374, 30375, 30376, 30377, 30400, 30401, 30402, 30403, 30404, 30405, 30406, 30407, 30410, 30411, 30412, 30413, 30414, 30415, 30416, 30417, 30420, 30421, 30422, 30423, 30424, 30425, 30426, 30427, 30430, 30431, 30432, 30433, 30434, 30435, 30436, 30437, 30440, 30441, 30442, 30443, 30444, 30445, 30446, 30447, 30450, 30451, 30452, 30453, 30454, 30455, 30456, 30457, 30460, 30461, 30462, 30463, 30464, 30465, 30466, 30467, 30470, 30471, 30472, 30473, 30474, 30475, 30476, 30477, 30480, 30481, 30482, 30483, 30484, 30485, 30486, 30487, 30490, 30491, 30492, 30493, 30494, 30495, 30496, 30497, 30510, 30511, 30512, 30513, 30514, 30515, 30516, 30517, 30520, 30521, 30522, 30523, 30524, 30525, 30526, 30527, 30530, 30531, 30532, 30533, 30534, 30535, 30536, 30537, 30540, 30541, 30542, 30543, 30544, 30545, 30546, 30547, 30550, 30551, 30552, 30553, 30554, 30555, 30556, 30557, 30560, 30561, 30562, 30563, 30564, 30565, 30566, 30567, 30570, 30571, 30572, 30573, 30574, 30575, 30576, 30577, 30580, 30581, 30582, 30583, 30584, 30585, 30586, 30587, 30590, 30591, 30592, 30593, 30594, 30595, 30596, 30597, 30600, 30601, 30602, 30603, 30604, 30605, 30606, 30607, 30610, 30611, 30612, 30613, 30614, 30615, 30616, 30617, 30620, 30621, 30622, 30623, 30624, 30625, 30626, 30627, 30630, 30631, 30632, 30633, 30634, 30635, 30636, 30637, 30640, 30641, 30642, 30643, 30644, 30645, 30646, 30647, 30650, 30651, 30652, 30653, 30654, 30655, 30656, 30657, 30660, 30661, 30662, 30663, 30664, 30665, 30666, 30667, 30670, 30671, 30672, 30673, 30674, 30675, 30676, 30677, 30680, 30681, 30682, 30683, 30684, 30685, 30686, 30687, 30690, 30691, 30692, 30693, 30694, 30695, 30696, 30697, 30700, 30701, 30702, 30703, 30704, 30705, 30706, 30707, 30710, 30711, 30712, 30713, 30714, 30715, 30716, 30717, 30720, 30721, 30722, 30723, 30724, 30725, 30726, 30727, 30730, 30731, 30732, 30733, 30734, 30735, 30736, 30737, 30740, 30741, 30742, 30743, 30744, 30745, 30746, 30747, 30750, 30751, 30752, 30753, 30754, 30755, 30756, 30757, 30760, 30761, 30762, 30763, 30764, 30765, 30766, 30767, 30770, 30771, 30772, 30773, 30774, 30775, 30776, 30777, 30780, 30781, 30782, 30783, 30784, 30785, 30786, 30787, 30790, 30791, 30792, 30793, 30794, 30795, 30796, 30797, 30800, 30801, 30802, 30803, 30804, 30805, 30806, 30807, 30810, 30811, 30812, 30813, 30814, 30815, 30816, 30817, 30820, 30821, 30822, 30823, 30824, 30825, 30826, 30827, 30830, 30831, 30832, 30833, 30834, 30835, 30836, 30837, 30840, 30841, 30842, 30843, 30844, 30845, 30846, 30847, 30850, 30851, 30852, 30853, 30854, 30855, 30856, 30857, 30860, 30861, 30862, 30863, 30864, 30865, 30866, 30867, 30870, 30871, 30872, 30873, 30874, 30875, 30876, 30877, 30880, 30881, 30882, 30883, 30884, 30885, 30886, 30887, 30890, 30891, 30892, 30893, 30894, 30895, 30896, 30897, 30900, 30901, 30902, 30903, 30904, 30905, 30906, 30907, 30910, 30911, 30912, 30913, 30914, 30915, 30916, 30917, 30920, 30921, 30922, 30923, 30924, 30925, 30926, 30927, 30930, 30931, 30932, 30933, 30934, 30935, 30936, 30937, 30940, 30941, 30942, 30943, 30944, 30945, 30946, 30947, 30950, 30951, 30952, 30953, 30954, 30955, 30956, 30957, 30990, 30991, 30992, 30993, 30994, 30995, 30996, 30997];
                var mface = [20000, 20001, 20002, 20003, 20004, 20005, 20006, 20007, 20008, 20009, 20010, 20011, 20012, 20013, 20014, 20015, 20016, 20017, 20018, 20019, 20020, 20021, 20022, 20023, 20024, 20025, 20026, 20027, 20028, 20029, 20031, 20032, 20100, 20101, 20102, 20103, 20104, 20105, 20106, 20107, 20108, 20109, 20110, 20111, 20112, 20113, 20114, 20115, 20116, 20117, 20118, 20119, 20120, 20121, 20122, 20123, 20124, 20125, 20126, 20127, 20128, 20129, 20131, 20132, 20200, 20201, 20202, 20203, 20204, 20205, 20206, 20207, 20208, 20209, 20210, 20211, 20212, 20213, 20214, 20215, 20216, 20217, 20218, 20219, 20220, 20221, 20222, 20223, 20224, 20225, 20226, 20227, 20228, 20229, 20231, 20232, 20300, 20301, 20302, 20303, 20304, 20305, 20306, 20307, 20308, 20309, 20310, 20311, 20312, 20313, 20314, 20315, 20316, 20317, 20318, 20319, 20320, 20321, 20322, 20323, 20324, 20325, 20326, 20327, 20328, 20329, 20331, 20332, 20400, 20401, 20402, 20403, 20404, 20405, 20406, 20407, 20408, 20409, 20410, 20411, 20412, 20413, 20414, 20415, 20416, 20417, 20418, 20419, 20420, 20421, 20422, 20423, 20424, 20425, 20426, 20427, 20428, 20429, 20431, 20432, 20500, 20501, 20502, 20503, 20504, 20505, 20506, 20507, 20508, 20509, 20510, 20511, 20512, 20513, 20514, 20515, 20516, 20517, 20518, 20519, 20520, 20521, 20522, 20523, 20524, 20525, 20526, 20527, 20528, 20529, 20531, 20532, 20600, 20601, 20602, 20603, 20604, 20605, 20606, 20607, 20608, 20609, 20610, 20611, 20612, 20613, 20614, 20615, 20616, 20617, 20618, 20619, 20620, 20621, 20622, 20623, 20624, 20625, 20626, 20627, 20628, 20629, 20631, 20632, 20700, 20701, 20702, 20703, 20704, 20705, 20706, 20707, 20708, 20709, 20710, 20711, 20712, 20713, 20714, 20715, 20716, 20717, 20718, 20719, 20720, 20721, 20722, 20723, 20724, 20725, 20726, 20727, 20728, 20729, 20731, 20732, 20800, 20801, 20802, 20803, 20804, 20805, 20806, 20807, 20808, 20809, 20810, 20811, 20812, 20813, 20814, 20816, 20817, 20818, 20819, 20820, 20821, 20822, 20823, 20824, 20826, 20828];

                // Get random values from skin, mhair, and mface arrays
                randomSkin = getRandomValue(skin);
                randomHair = getRandomValue(mhair);
                randomFace = getRandomValue(mface);
            }

            // Check for Female Gender
            else if (cm.getPlayer().getGender() == 1)
            {
                // Create hair/face Arrays
                var fhair = [31000, 31001, 31002, 31003, 31004, 31005, 31006, 31007, 31010, 31011, 31012, 31013, 31014, 31015, 31016, 31017, 31020, 31021, 31022, 31023, 31024, 31025, 31026, 31027, 31030, 31031, 31032, 31033, 31034, 31035, 31036, 31037, 31040, 31041, 31042, 31043, 31044, 31045, 31046, 31047, 31050, 31051, 31052, 31053, 31054, 31055, 31056, 31057, 31060, 31061, 31062, 31063, 31064, 31065, 31066, 31067, 31070, 31071, 31072, 31073, 31074, 31075, 31076, 31077, 31080, 31081, 31082, 31083, 31084, 31085, 31086, 31087, 31090, 31091, 31092, 31093, 31094, 31095, 31096, 31097, 31100, 31101, 31102, 31103, 31104, 31105, 31106, 31107, 31110, 31111, 31112, 31113, 31114, 31115, 31116, 31117, 31120, 31121, 31122, 31123, 31124, 31125, 31126, 31127, 31130, 31131, 31132, 31133, 31134, 31135, 31136, 31137, 31140, 31141, 31142, 31143, 31144, 31145, 31146, 31147, 31150, 31151, 31152, 31153, 31154, 31155, 31156, 31157, 31160, 31161, 31162, 31163, 31164, 31165, 31166, 31167, 31170, 31171, 31172, 31173, 31174, 31175, 31176, 31177, 31180, 31181, 31182, 31183, 31184, 31185, 31186, 31187, 31190, 31191, 31192, 31193, 31194, 31195, 31196, 31197, 31200, 31201, 31202, 31203, 31204, 31205, 31206, 31207, 31210, 31211, 31212, 31213, 31214, 31215, 31216, 31217, 31220, 31221, 31222, 31223, 31224, 31225, 31226, 31227, 31230, 31231, 31232, 31233, 31234, 31235, 31236, 31237, 31240, 31241, 31242, 31243, 31244, 31245, 31246, 31247, 31250, 31251, 31252, 31253, 31254, 31255, 31256, 31257, 31260, 31261, 31262, 31263, 31264, 31265, 31266, 31267, 31270, 31271, 31272, 31273, 31274, 31275, 31276, 31277, 31280, 31281, 31282, 31283, 31284, 31285, 31286, 31287, 31290, 31291, 31292, 31293, 31294, 31295, 31296, 31297, 31300, 31301, 31302, 31303, 31304, 31305, 31306, 31307, 31310, 31311, 31312, 31313, 31314, 31315, 31316, 31317, 31320, 31321, 31322, 31323, 31324, 31325, 31326, 31327, 31330, 31331, 31332, 31333, 31334, 31335, 31336, 31337, 31340, 31341, 31342, 31343, 31344, 31345, 31346, 31347, 31350, 31351, 31352, 31353, 31354, 31355, 31356, 31357, 31400, 31401, 31402, 31403, 31404, 31405, 31406, 31407, 31410, 31411, 31412, 31413, 31414, 31415, 31416, 31417, 31420, 31421, 31422, 31423, 31424, 31425, 31426, 31427, 31430, 31431, 31432, 31433, 31434, 31435, 31436, 31437, 31440, 31441, 31442, 31443, 31444, 31445, 31446, 31447, 31450, 31451, 31452, 31453, 31454, 31455, 31456, 31457, 31460, 31461, 31462, 31463, 31464, 31465, 31466, 31467, 31470, 31471, 31472, 31473, 31474, 31475, 31476, 31477, 31480, 31481, 31482, 31483, 31484, 31485, 31486, 31487, 31490, 31491, 31492, 31493, 31494, 31495, 31496, 31497, 31510, 31511, 31512, 31513, 31514, 31515, 31516, 31517, 31520, 31521, 31522, 31523, 31524, 31525, 31526, 31527, 31530, 31531, 31532, 31533, 31534, 31535, 31536, 31537, 31540, 31541, 31542, 31543, 31544, 31545, 31546, 31547, 31550, 31551, 31552, 31553, 31554, 31555, 31556, 31557, 31560, 31561, 31562, 31563, 31564, 31565, 31566, 31567, 31570, 31571, 31572, 31573, 31574, 31575, 31576, 31577, 31580, 31581, 31582, 31583, 31584, 31585, 31586, 31587, 31590, 31591, 31592, 31593, 31594, 31595, 31596, 31597, 31600, 31601, 31602, 31603, 31604, 31605, 31606, 31607, 31610, 31611, 31612, 31613, 31614, 31615, 31616, 31617, 31620, 31621, 31622, 31623, 31624, 31625, 31626, 31627, 31630, 31631, 31632, 31633, 31634, 31635, 31636, 31637, 31640, 31641, 31642, 31643, 31644, 31645, 31646, 31647, 31650, 31651, 31652, 31653, 31654, 31655, 31656, 31657, 31660, 31661, 31662, 31663, 31664, 31665, 31666, 31667, 31670, 31671, 31672, 31673, 31674, 31675, 31676, 31677, 31680, 31681, 31682, 31683, 31684, 31685, 31686, 31687, 31690, 31691, 31692, 31693, 31694, 31695, 31696, 31697, 31700, 31701, 31702, 31703, 31704, 31705, 31706, 31707, 31710, 31711, 31712, 31713, 31714, 31715, 31716, 31717, 31720, 31721, 31722, 31723, 31724, 31725, 31726, 31727, 31730, 31731, 31732, 31733, 31734, 31735, 31736, 31737, 31740, 31741, 31742, 31743, 31744, 31745, 31746, 31747, 31750, 31751, 31752, 31753, 31754, 31755, 31756, 31757, 31760, 31761, 31762, 31763, 31764, 31765, 31766, 31767, 31770, 31771, 31772, 31773, 31774, 31775, 31776, 31777, 31780, 31781, 31782, 31783, 31784, 31785, 31786, 31787, 31790, 31791, 31792, 31793, 31794, 31795, 31796, 31797, 31800, 31801, 31802, 31803, 31804, 31805, 31806, 31807, 31810, 31811, 31812, 31813, 31814, 31815, 31816, 31817, 31820, 31821, 31822, 31823, 31824, 31825, 31826, 31827, 31830, 31831, 31832, 31833, 31834, 31835, 31836, 31837, 31840, 31841, 31842, 31843, 31844, 31845, 31846, 31847, 31850, 31851, 31852, 31853, 31854, 31855, 31856, 31857, 31860, 31861, 31862, 31863, 31864, 31865, 31866, 31867, 31870, 31871, 31872, 31873, 31874, 31875, 31876, 31877, 31880, 31881, 31882, 31883, 31884, 31885, 31886, 31887, 31890, 31891, 31892, 31893, 31894, 31895, 31896, 31897, 31910, 31911, 31912, 31913, 31914, 31915, 31916, 31917, 31920, 31921, 31922, 31923, 31924, 31925, 31926, 31927, 31930, 31931, 31932, 31933, 31934, 31935, 31936, 31937, 31940, 31941, 31942, 31943, 31944, 31945, 31946, 31947, 31950, 31951, 31952, 31953, 31954, 31955, 31956, 31957];
                var fface = [21000, 21001, 21002, 21003, 21004, 21005, 21006, 21007, 21008, 21009, 21010, 21011, 21012, 21013, 21014, 21016, 21017, 21018, 21019, 21020, 21021, 21022, 21023, 21024, 21025, 21026, 21027, 21029, 21030, 21100, 21101, 21102, 21103, 21104, 21105, 21106, 21107, 21108, 21109, 21110, 21111, 21112, 21113, 21114, 21116, 21117, 21118, 21119, 21120, 21121, 21122, 21123, 21124, 21125, 21126, 21127, 21129, 21130, 21200, 21201, 21202, 21203, 21204, 21205, 21206, 21207, 21208, 21209, 21210, 21211, 21212, 21213, 21214, 21216, 21217, 21218, 21219, 21220, 21221, 21222, 21223, 21224, 21225, 21226, 21227, 21229, 21230, 21300, 21301, 21302, 21303, 21304, 21305, 21306, 21307, 21308, 21309, 21310, 21311, 21312, 21313, 21314, 21316, 21317, 21318, 21319, 21320, 21321, 21322, 21323, 21324, 21325, 21326, 21327, 21329, 21330, 21400, 21401, 21402, 21403, 21404, 21405, 21406, 21407, 21408, 21409, 21410, 21411, 21412, 21413, 21414, 21416, 21417, 21418, 21419, 21420, 21421, 21422, 21423, 21424, 21425, 21426, 21427, 21429, 21430, 21500, 21501, 21502, 21503, 21504, 21505, 21506, 21507, 21508, 21509, 21510, 21511, 21512, 21513, 21514, 21516, 21517, 21518, 21519, 21520, 21521, 21522, 21523, 21524, 21525, 21526, 21527, 21529, 21530, 21600, 21601, 21602, 21603, 21604, 21605, 21606, 21607, 21608, 21609, 21610, 21611, 21612, 21613, 21614, 21616, 21617, 21618, 21619, 21620, 21621, 21622, 21623, 21624, 21625, 21626, 21627, 21629, 21630, 21700, 21701, 21702, 21703, 21704, 21705, 21706, 21707, 21708, 21709, 21710, 21711, 21712, 21713, 21714, 21716, 21717, 21718, 21719, 21720, 21721, 21722, 21723, 21724, 21725, 21726, 21727, 21729, 21730, 21800, 21801, 21802, 21803, 21804, 21805, 21806, 21807, 21808, 21809, 21810, 21811, 21812, 21813, 21814, 21816, 21817, 21818, 21819, 21820, 21821, 21822, 21823, 21824, 21825, 21826];

                // Get random values from skin, mhair, and mface arrays
                randomSkin = getRandomValue(skin);
                randomHair = getRandomValue(fhair);
                randomFace = getRandomValue(fface);
            }

            // Update the player's looks
            cm.setSkin(randomSkin);
            cm.setHair(randomHair);
            cm.setFace(randomFace);

            // Update Quest
            cm.completeQuest(1011);

            // Remove Item
            cm.gainItem(4007014, -1);

            // Save the player, so they can't cheese it
            cm.getPlayer().saveCharToDB();

            // Close out the interaction
            cm.sendOk("#eBadaboom, badabang!#n\r\n\r\nStraight fire, #h #! Hope you like it, did the best I could. Hah!");
            cm.dispose();
        }

        // They got to status = 1, but didn't meet the criteria
        else
        {
            cm.sendOk("Not sure how you got into this prompt, report to #bAdventureMS#k!")
            cm.dispose();
        }
    }
}